{% extends 'home.html' %}

{% block title %}Calculator - {% endblock title %}

{% block calculator %}
    {% if func_mode == "linear" %}

        <h2>Linear Function</h2>

        <form id="coefficient_form" method="POST">
            coefficient: <input type="number" name="coefficient">
            constant: <input type="number" name="constant">
    
            <input type="submit" value="OK">
            <input type="button" onclick="reset()" value="Reset">
        </form>


    {% elif func_mode == "quadratic" %}

        <h2>Quadratic Function</h2>
    
        <form id="coefficient_form" method="POST">
            coefficient: <input type="number" name="coefficient_a">
            coefficient: <input type="number" name="coefficient_b">
            coefficient: <input type="number" name="coefficient_c">
    
            <input type="submit" value="OK">
            <input type="button" onclick="reset()" value="Reset">
        </form>

    {% elif func_mode == "cubic" %}

        <h2>Cubic Function</h2>
        
        <form id="coefficient_form" method="POST">
            coefficient: <input type="number" name="coefficient_a">
            coefficient: <input type="number" name="coefficient_b">
            coefficient: <input type="number" name="coefficient_c">
            coefficient: <input type="number" name="coefficient_d">

            <input type="submit" value="OK">
            <input type="button" onclick="reset()" value="Reset">
        </form>
    
    {% endif %}

    <script>
        function reset() {
            document.getElementById("coefficient_form").reset();
        }
    </script>

{% endblock calculator %}

{% block result %}

    {% if func_detail %}
        <div style="display: flex;">
            <div style="overflow-y: scroll; max-height: 300px; width: 50%;">
                {% for func, detail in func_detail.items() %}
                    <div style="border: 1px solid #ccc; margin-bottom: 10px; padding: 10px; box-shadow: 2px 2px 5px #888;">
                        <div style="display: inline-block; margin-right: 10px;">
                            <div style="width: 20px; height: 20px; border-radius: 50%; background-color: {{ func_information[func]['color'] }};"></div>
                        </div>
                        <h3 style="display: inline-block;">{{ detail['expr'] }}</h3>
                        <br>
                        <input type="radio" id="{{ func }}_show" name="{{ func }}_show" {% if func_information[func]['show'] %} checked {% endif %}>
                        <label for="{{ func }}_show">Show</label>
                        <input type="radio" id="{{ func }}_marker" name="{{ func }}_marker" {% if func_information[func]['marker'] %} checked {% endif %}>
                        <label for="{{ func }}_marker">Marker</label>
                        <select id="{{ func }}_color">
                            <option value="red" {% if func_information[func]['color'] == 'red' %} selected {% endif %}>Red</option>
                            <option value="blue" {% if func_information[func]['color'] == 'blue' %} selected {% endif %}>Blue</option>
                            <option value="green" {% if func_information[func]['color'] == 'green' %} selected {% endif %}>Green</option>
                            <!-- Add more color options as needed -->
                        </select>
                    </div>
                {% endfor %}
            </div>
            <div style="width: 50%;">
                <img src='data:image/png;base64,{{ graph }}' alt="Graph cannot be displayed"/>
            </div>
        </div>
    {% endif %}

{% endblock result %}
